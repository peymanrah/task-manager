# Research: Claude Agent Teams vs Subagents

## Key Terminology
- **Agent Teams** — Experimental Claude Code feature for orchestrating multiple independent Claude Code sessions
- **Subagents** — Specialized agent instances spawned within a single session (available in Claude Code and Claude Agent SDK)

> There is no specific feature called "team agents." The correct terms are **Agent Teams** and **Subagents**.

---

## Agent Teams (Experimental)

Enabled via `CLAUDE_CODE_EXPERIMENTAL_AGENT_TEAMS=1`. Coordinates multiple independent Claude Code instances.

### Architecture
| Component | Role |
|---|---|
| **Team Lead** | Main session that spawns teammates and coordinates |
| **Teammates** | Separate Claude Code instances, each with own full context window |
| **Task List** | Shared list of work items teammates claim and complete |
| **Mailbox** | Messaging system for direct communication between agents |

### Key Characteristics
- Each teammate is a fully independent Claude Code session with its own context window
- Teammates communicate directly with each other (not just back to lead)
- Self-coordination via shared task list with dependency management
- Supports split-pane display (tmux/iTerm2) or in-process mode
- Talk to individual teammates using Shift+Up/Down
- Delegate mode restricts lead to coordination-only
- Quality gates via hooks (`TeammateIdle`, `TaskCompleted`)

### Best Use Cases
- Research & review (multiple perspectives in parallel)
- New modules/features where teammates each own separate files
- Debugging with competing hypotheses (adversarial investigation)
- Cross-layer coordination (frontend, backend, tests)

### Limitations
- Experimental; no session resumption with in-process teammates
- Significantly higher token cost
- One team per session; no nested teams
- Teammates cannot spawn their own teams

---

## Subagents (Stable)

Available by default in Claude Code and the Claude Agent SDK.

### Built-in Subagents in Claude Code
| Subagent | Purpose | Model |
|---|---|---|
| **Explore** | Read-only codebase search/analysis | Haiku (fast) |
| **Plan** | Planning and reasoning | Inherits |
| **General-purpose** | Ad-hoc delegation via the Task tool | Inherits |

### Key Characteristics
- Run in own context window; results return to calling agent
- Cannot communicate with each other — only report back to main agent
- Definable programmatically (Agent SDK), as markdown files (`.claude/agents/`), or via CLI flags
- Support tool restrictions, custom system prompts, model overrides
- Support persistent memory across sessions
- Cannot spawn other subagents (no nesting)
- Can run in foreground (blocking) or background (concurrent)

### Benefits
- **Context management** — keeps exploration output out of main conversation
- **Parallelization** — multiple subagents can run concurrently
- **Specialized instructions** — tailored prompts per domain
- **Tool restrictions** — enforce least-privilege access
- **Cost control** — route to cheaper/faster models (e.g., Haiku)

---

## Head-to-Head Comparison

| Dimension | Subagents | Agent Teams |
|---|---|---|
| **Context** | Own context; results return to caller | Own context; fully independent |
| **Communication** | Report results back to main agent only | Teammates message each other directly |
| **Coordination** | Main agent manages all work | Shared task list with self-coordination |
| **Best for** | Focused tasks where only the result matters | Complex work requiring discussion & collaboration |
| **Token cost** | Lower: results summarized back | Higher: each teammate is full Claude instance |
| **Stability** | Stable, available by default | Experimental, must be explicitly enabled |

---

## Decision Guide: When to Use What

| Situation | Recommended Approach |
|---|---|
| Simple, focused task | **Single agent** (no subagents needed) |
| Task produces verbose output you don't need | **Subagent** |
| Need to enforce tool restrictions on a subtask | **Subagent** |
| Quick research or exploration | **Subagent** (especially built-in Explore) |
| Route simple tasks to cheaper models | **Subagent** with `model: "haiku"` |
| Multiple independent research paths | **Subagents** (run in parallel background) |
| Workers need to discuss/challenge each other | **Agent Team** |
| Complex debugging with competing hypotheses | **Agent Team** |
| Building features across frontend/backend/tests | **Agent Team** |
| Need peer-to-peer coordination | **Agent Team** |
| Production API-based application | **Agent SDK subagents** (programmatic) |
| Sequential dependent workflow | **Single agent** or **chained subagents** |
| Tight budget / token-sensitive | **Single agent** or **subagents** (not teams) |

---

## Best Practices

### 1. Start Simple
> "The most successful implementations weren't using complex frameworks. They were building with simple, composable patterns."

Start with a single agent, optimize prompts, and add agents only when evidence supports it. Multi-agent systems use **3-10x more tokens**.

### 2. Three Justified Reasons for Multi-Agent
1. **Context protection** — subtasks generate 1000+ tokens of irrelevant context
2. **Parallelization** — tasks decompose into independent pieces
3. **Specialization** — 20+ tools, or conflicting personas/prompts needed

### 3. Context-Centric Decomposition
Divide by **context boundaries**, not by problem type:
- **Good:** Each agent owns an independent module (frontend vs. backend)
- **Bad:** Splitting by role (planner, implementer, tester) — creates "telephone game"

### 4. The Verification Subagent Pattern
A dedicated verification agent that tests/validates the main agent's work. Effective because verification requires minimal context transfer.

---

## Lessons Learned
- [x] "Team agents" is not a branded feature — use "Agent Teams" or "Subagents"
- [x] Subagents are the mainstream stable pattern for most use cases
- [x] Agent Teams are experimental and heavyweight — use only when peer-to-peer communication is genuinely needed
- [x] Anthropic's #1 recommendation: simplicity first, multi-agent only when justified
- [x] The Claude Agent SDK provides programmatic subagent access for production apps
